networks:
  backend_network:
    external: true
  frontend_network:
    external: true

services:
  nodpt-signalr:
    build:
      context: ..
      dockerfile: SignalR/Dockerfile
    image: nodpt-signalr:latest
    container_name: nodpt-signalr
    pull_policy: always

    # ðŸ”¹ Load external environment file
    env_file:
      - /home/runner_user/envs/backend.env

    # ðŸ”¹ Expose backend port 
    ports:
      - "8848:8848"

    # ðŸ”¹ Environment variables specific to ASP.NET Core
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
      - ASPNETCORE_URLS=http://0.0.0.0:8848
      - ASPNETCORE_HTTP_PORTS=8848

    # ðŸ”¹ Docker networks for DB, backend & frontend
    networks:
      - backend_network
      - frontend_network
    # ðŸ”¹ Auto restart on failure
    # restart: always
